<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>旅行规划表 - 上海及周边</title>
    <!-- Tailwind CSS CDN -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <!-- Google Fonts - Montserrat for headings, Open Sans for body -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <!-- Font Awesome CDN for Icons (v5 or v6) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* A4 paper size and print-specific styles */
        @page {
            size: A4;
            margin: 10mm; /* Printing margins */
        }

        body {
            font-family: 'Open Sans', sans-serif;
            color: #333;
            background-color: #f0f2f5; /* Light background for screen */
            margin: 0;
            padding: 0;
            line-height: 1.6;
        }

        .page-container {
            width: 210mm; /* A4 width */
            min-height: 297mm; /* A4 height */
            margin: 0 auto;
            background-color: #fff;
            padding: 20mm; /* Inner padding for content */
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            box-sizing: border-box;
            position: relative; /* For cutter guides */
            overflow: hidden; /* Ensure cutter guides don't affect layout much */
        }

        /* Print specific styles */
        @media print {
            body {
                background-color: #fff;
            }
            .page-container {
                box-shadow: none;
                margin: 0;
                padding: 10mm; /* Adjust for print margins */
                width: auto; /* Let browser handle width */
                min-height: auto; /* Let browser handle height */
                page-break-after: always; /* Ensure proper page breaks for multi-page content */
            }
            .no-print {
                display: none !important;
            }
            .cutter-guide {
                display: block; /* Show cutter guides only on print */
            }
            /* Ensure smooth page breaks for cards */
            .main-card, .mini-card {
                page-break-inside: avoid;
            }
            /* Table header repetition on new page */
            thead {
                display: table-header-group;
            }
            tr {
                page-break-inside: avoid;
            }
            /* Chart rendering for print */
            canvas {
                -webkit-print-color-adjust: exact; /* Preserve colors for charts */
                print-color-adjust: exact;
            }
        }

        /* Cutter guides (optional, visible only on print) */
        .cutter-guide {
            position: absolute;
            display: none;
            width: 10mm;
            height: 0.2mm;
            background-color: #000;
        }
        .cutter-guide.top-left { top: 0; left: 0; transform: rotate(-45deg); transform-origin: top left; }
        .cutter-guide.top-right { top: 0; right: 0; transform: rotate(45deg); transform-origin: top right; }
        .cutter-guide.bottom-left { bottom: 0; left: 0; transform: rotate(45deg); transform-origin: bottom left; }
        .cutter-guide.bottom-right { bottom: 0; right: 0; transform: rotate(-45deg); transform-origin: bottom right; }


        /* Custom styles for layout and appearance */
        h1, h2, h3, h4 {
            font-family: 'Montserrat', sans-serif;
            color: #2c3e50;
        }

        .header-section {
            background-color: #eaf2f8;
            padding: 24px;
            border-bottom: 4px solid #3498db;
            text-align: center;
            margin-bottom: 24px;
        }

        .header-section h1 {
            color: #3498db;
            font-size: 2.5rem;
            margin-bottom: 8px;
        }

        .header-section p {
            font-size: 1.1rem;
            color: #555;
        }

        .main-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
        }

        .main-card {
            background-color: #fff;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 24px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            transition: transform 0.5s ease-out, opacity 0.5s ease-out;
            opacity: 0;
            transform: translateY(20px);
        }

        .main-card.fade-in {
            opacity: 1;
            transform: translateY(0);
        }

        .main-card h2 {
            font-size: 1.8rem;
            margin-bottom: 16px;
            color: #34495e;
            display: flex;
            align-items: center;
        }

        .main-card h2 i {
            margin-right: 12px;
            color: #3498db;
        }

        .mini-card {
            background-color: #f9f9f9;
            border: 1px solid #eee;
            border-radius: 6px;
            padding: 16px;
            margin-bottom: 12px;
            display: flex;
            align-items: flex-start;
            transition: transform 0.5s ease-out, opacity 0.5s ease-out;
            opacity: 0;
            transform: translateY(10px);
        }

        .mini-card.fade-in {
            opacity: 1;
            transform: translateY(0);
        }

        .mini-card i {
            margin-right: 10px;
            color: #2ecc71; /* Green for activities */
            font-size: 1.2rem;
            flex-shrink: 0;
            line-height: 1.5; /* Align icon better with text */
        }

        .mini-card.food i { color: #e67e22; } /* Orange for food */
        .mini-card.transport i { color: #9b59b6; } /* Purple for transport */
        .mini-card.accommodation i { color: #f1c40f; } /* Yellow for accommodation */
        .mini-card.info i { color: #3498db; } /* Blue for info */
        .mini-card.alert i { color: #e74c3c; } /* Red for alerts */

        .table-responsive {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 16px;
        }

        table th, table td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
            vertical-align: top;
        }

        table th {
            background-color: #f2f2f2;
            font-weight: 600;
            color: #444;
        }

        .text-highlight {
            color: #e67e22;
            font-weight: 600;
        }

        .print-button-container {
            text-align: center;
            margin-top: 30px;
            padding-bottom: 30px;
        }

        .print-button {
            background-color: #3498db;
            color: white;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1.1rem;
            display: inline-flex;
            align-items: center;
            transition: background-color 0.3s ease;
        }

        .print-button:hover {
            background-color: #2980b9;
        }

        .print-button i {
            margin-right: 8px;
        }

        .chart-container {
            width: 100%;
            max-width: 400px; /* Limit chart size for print-friendliness */
            margin: 20px auto;
        }
    </style>
</head>
<body>
    <div class="no-print print-button-container">
        <button class="print-button" onclick="window.print()">
            <i class="fas fa-print"></i> 打印旅行规划表
        </button>
    </div>

    <!-- Cutter Guides (Visible only on print) -->
    <div class="cutter-guide top-left"></div>
    <div class="cutter-guide top-right"></div>
    <div class="cutter-guide bottom-left"></div>
    <div class="cutter-guide bottom-right"></div>

    <div class="page-container">
        <!-- 行程标题区 -->
        <div class="header-section">
            <h1 class="text-blue-600 mb-2">
                <i class="fas fa-map-marked-alt mr-3"></i>上海及周边深度探索
            </h1>
            <p class="text-lg text-gray-700">
                <i class="far fa-calendar-alt mr-2"></i>日期：2025年6月6日 - 6月8日
                <span class="mx-4">|</span>
                <i class="fas fa-sun mr-2"></i>总天数：3天
            </p>
            <p class="text-md text-gray-600 mt-2">
                <i class="fas fa-user-friends mr-2"></i>旅行者：探险小分队
                <span class="mx-4">|</span>
                <i class="fas fa-cloud-sun mr-2"></i>天气（6月上旬）：多云到晴，22°C - 30°C
            </p>
        </div>

        <div class="main-grid">
            <!-- 行程概览区 -->
            <div class="main-card">
                <h2><i class="fas fa-list-alt"></i>行程概览</h2>
                <div class="mini-card info">
                    <i class="fas fa-calendar-day"></i>
                    <div>
                        <p class="font-semibold">D1 (6月6日): <span class="text-blue-500">上海 → 杭州中国美术学院美术馆 → 桐庐</span></p>
                        <p class="text-sm text-gray-600">艺术熏陶，入住富春江骏悦酒店，品尝桐庐美食。</p>
                    </div>
                </div>
                <div class="mini-card info">
                    <i class="fas fa-calendar-day"></i>
                    <div>
                        <p class="font-semibold">D2 (6月7日): <span class="text-blue-500">桐庐雅鲁激流探险漂流</span></p>
                        <p class="text-sm text-gray-600">刺激漂流体验，继续品味桐庐地道风味。</p>
                    </div>
                </div>
                <div class="mini-card info">
                    <i class="fas fa-calendar-day"></i>
                    <div>
                        <p class="font-semibold">D3 (6月8日): <span class="text-blue-500">桐庐 → 乌镇 → 返回上海</span></p>
                        <p class="text-sm text-gray-600">水乡古镇韵味，午餐后返沪。</p>
                    </div>
                </div>
            </div>

            <!-- 实用信息区 - 预算概览 (带图表) -->
            <div class="main-card">
                <h2><i class="fas fa-chart-pie"></i>费用预算概览</h2>
                <div class="chart-container">
                    <canvas id="budgetChart"></canvas>
                </div>
                <ul class="list-disc list-inside text-gray-700 mt-4">
                    <li><span class="font-semibold">住宿:</span> 约 800元/晚 x 2晚</li>
                    <li><span class="font-semibold">交通:</span> 油费 + 高速费 约 500元</li>
                    <li><span class="font-semibold">门票:</span> 美术馆、漂流、乌镇 约 400元/人</li>
                    <li><span class="font-semibold">餐饮:</span> 约 150元/人/餐 x 8餐</li>
                    <li><span class="font-semibold">总计预估:</span> 约 <span class="text-highlight">1800-2500元/人</span> (不含购物)</li>
                </ul>
            </div>
        </div>

        <div class="main-grid mt-6">
            <!-- 详细时间表区 -->
            <div class="main-card col-span-full">
                <h2><i class="fas fa-clock"></i>详细行程时间表</h2>
                <div class="table-responsive">
                    <table>
                        <thead>
                            <tr>
                                <th>日期</th>
                                <th>时间</th>
                                <th>活动</th>
                                <th>地点</th>
                                <th>详情 & 备注</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Day 1 -->
                            <tr>
                                <td rowspan="4">D1<br>6月6日 (周五)</td>
                                <td>上午</td>
                                <td><span class="font-semibold">上海出发 → 杭州</span></td>
                                <td>自驾</td>
                                <td>预计车程 <span class="text-highlight">2.5-3小时</span>。</td>
                            </tr>
                            <tr>
                                <td>下午 (13:00-16:00)</td>
                                <td><i class="fas fa-paint-brush text-blue-500"></i> 中国美术学院美术馆</td>
                                <td>杭州市西湖区南山路218号</td>
                                <td>感受艺术氛围，建议提前查询开放时间与展览。</td>
                            </tr>
                            <tr>
                                <td>傍晚 (16:30-17:30)</td>
                                <td><i class="fas fa-car text-purple-500"></i> 杭州 → 桐庐</td>
                                <td>自驾</td>
                                <td>车程：<span class="text-highlight">约 57分钟 (71.53公里)</span>。<br>导航至桐庐富春江骏悦酒店。</td>
                            </tr>
                            <tr>
                                <td>晚上</td>
                                <td><i class="fas fa-utensils text-orange-500"></i> 桐庐地道美食</td>
                                <td>桐庐富春江骏悦酒店餐厅 / 富春江渔村 / 方埠小吃店</td>
                                <td>推荐：富春江鲥鱼、油焖笋、桐庐板栗烧肉、本地土鸡煲。</td>
                            </tr>
                            <!-- Day 2 -->
                            <tr>
                                <td rowspan="3">D2<br>6月7日 (周六)</td>
                                <td>上午/下午</td>
                                <td><i class="fas fa-water text-green-500"></i> 雅鲁激流探险漂流</td>
                                <td>桐庐合村村</td>
                                <td>车程：<span class="text-highlight">约 66分钟 (51.71公里)</span>。<br>刺激漂流，建议提前预订，携带速干衣物。</td>
                            </tr>
                            <tr>
                                <td>下午</td>
                                <td><i class="fas fa-hotel text-yellow-500"></i> 返回桐庐富春江骏悦酒店</td>
                                <td>桐庐富春江骏悦酒店</td>
                                <td>车程：<span class="text-highlight">约 69分钟 (52.27公里)</span>。<br>休息调整。</td>
                            </tr>
                            <tr>
                                <td>晚上</td>
                                <td><i class="fas fa-utensils text-orange-500"></i> 桐庐地道美食</td>
                                <td>三桥农家乐 / 桐庐老街小吃</td>
                                <td>推荐：散养土鸡、时令蔬菜、桐庐麦饼、油沸粿、米粿。</td>
                            </tr>
                            <!-- Day 3 -->
                            <tr>
                                <td rowspan="4">D3<br>6月8日 (周日)</td>
                                <td>上午 (9:00-11:30)</td>
                                <td><i class="fas fa-car text-purple-500"></i> 桐庐 → 乌镇</td>
                                <td>自驾</td>
                                <td>车程：<span class="text-highlight">约 2小时8分钟 (164.24公里)</span>。<br>抵达乌镇。</td>
                            </tr>
                            <tr>
                                <td>上午/中午</td>
                                <td><i class="fas fa-gopuram text-blue-500"></i> 游览乌镇西栅</td>
                                <td>乌镇景区</td>
                                <td>体验水乡风情，拍照留念，可尝试摇橹船。</td>
                            </tr>
                            <tr>
                                <td>中午/下午</td>
                                <td><i class="fas fa-utensils text-orange-500"></i> 乌镇午餐</td>
                                <td>乌镇景区内餐厅 / 乌镇老街饭店</td>
                                <td>推荐：酱鸭、白水鱼、红烧羊肉、定胜糕、姑嫂饼。</td>
                            </tr>
                            <tr>
                                <td>下午 (15:00-)</td>
                                <td><i class="fas fa-car text-purple-500"></i> 乌镇 → 返回上海</td>
                                <td>自驾</td>
                                <td>预计车程 <span class="text-highlight">1.5-2小时</span>。</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- 交通信息区 -->
            <div class="main-card">
                <h2><i class="fas fa-car"></i>交通信息</h2>
                <div class="mini-card transport">
                    <i class="fas fa-route"></i>
                    <div>
                        <p class="font-semibold">全程自驾</p>
                        <p class="text-sm text-gray-600">请使用高德地图导航，注意路况和高速限速。部分景点停车位可能紧张，建议提前规划。</p>
                    </div>
                </div>
                <div class="mini-card transport">
                    <i class="fas fa-map-pin"></i>
                    <div>
                        <p class="font-semibold">主要目的地坐标</p>
                        <p class="text-sm text-gray-600">
                            中国美术学院美术馆: 120.076371,30.163463<br>
                            桐庐富春江骏悦酒店: 119.686892,29.800344<br>
                            雅鲁激流探险漂流: 119.311142,29.935145<br>
                            乌镇: 120.493792,30.741511
                        </p>
                    </div>
                </div>
                <div class="mini-card transport">
                    <i class="fas fa-gas-pump"></i>
                    <div>
                        <p class="font-semibold">加油与充电</p>
                        <p class="text-sm text-gray-600">沿途高速服务区均有加油站。若电动车，请提前规划充电桩。</p>
                    </div>
                </div>
            </div>

            <!-- 住宿与餐饮区 -->
            <div class="main-card">
                <h2><i class="fas fa-hotel"></i>住宿与餐饮</h2>
                <div class="mini-card accommodation">
                    <i class="fas fa-bed"></i>
                    <div>
                        <p class="font-semibold">住宿：桐庐富春江骏悦酒店 (两晚)</p>
                        <p class="text-sm text-gray-600">
                            <span class="text-highlight">地址：</span> 桐庐县环城南路18号 (请自行核对)<br>
                            <span class="text-highlight">入住/退房：</span> D1入住，D3退房。<br>
                            <span class="text-highlight">联系方式：</span> (请查询酒店官网或预订信息)
                        </p>
                    </div>
                </div>
                <div class="mini-card food">
                    <i class="fas fa-utensils"></i>
                    <div>
                        <p class="font-semibold">餐饮推荐</p>
                        <p class="text-sm text-gray-600">
                            <span class="font-semibold">桐庐：</span> 富春江渔村、方埠小吃店、三桥农家乐。<br>
                            <span class="font-semibold">乌镇：</span> 景区内“民国时代”、“锦岸私房菜”，或景区外“乌镇老街饭店”。
                        </p>
                    </div>
                </div>
            </div>

            <!-- 实用信息区 -->
            <div class="main-card">
                <h2><i class="fas fa-info-circle"></i>实用提示与注意事项</h2>
                <div class="mini-card alert">
                    <i class="fas fa-exclamation-triangle"></i>
                    <div>
                        <p class="font-semibold">重要提示</p>
                        <ul class="list-disc list-inside text-sm text-gray-600">
                            <li>漂流、美术馆、乌镇等景点可能需要<span class="text-highlight">提前预订门票或预约</span>。</li>
                            <li>6月天气炎热，注意<span class="text-highlight">防晒、补水</span>。</li>
                            <li>漂流活动请穿着<span class="text-highlight">速干衣物</span>，携带备用衣物和拖鞋。</li>
                            <li>自驾请注意行车安全，导航实时路况。</li>
                        </ul>
                    </div>
                </div>
                <div class="mini-card info">
                    <i class="fas fa-phone-alt"></i>
                    <div>
                        <p class="font-semibold">紧急联系电话</p>
                        <ul class="list-disc list-inside text-sm text-gray-600">
                            <li>旅游咨询: 021-12301 (上海) / 当地旅游热线</li>
                            <li>紧急求助: 110 (警察) / 120 (急救)</li>
                            <li>酒店联系方式：(请自行填写)</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- 行李清单提醒 (可选) -->
            <div class="main-card">
                <h2><i class="fas fa-suitcase"></i>行李清单提醒</h2>
                <ul class="list-disc list-inside text-gray-700">
                    <li>身份证、驾驶证、行驶证</li>
                    <li>手机、充电器、充电宝</li>
                    <li>防晒霜、墨镜、帽子</li>
                    <li>舒适的鞋子 (运动鞋、拖鞋)</li>
                    <li>雨具 (雨伞或雨衣)</li>
                    <li>个人洗漱用品、常用药品</li>
                    <li>速干衣物 (漂流专用)、备用衣物</li>
                    <li>相机及配件 (可选)</li>
                    <li>少量现金 (部分小店可能只支持现金)</li>
                </ul>
            </div>
        </div>

        <p class="text-center text-sm text-gray-500 mt-8 mb-4 border-t pt-4 border-gray-200">
            本旅行规划表由AI生成，仅供参考，请以实际情况为准。祝您旅途愉快！
        </p>
    </div>

    <script>
        // Intersection Observer for fade-in animations
        document.addEventListener('DOMContentLoaded', () => {
            const cards = document.querySelectorAll('.main-card, .mini-card');

            const observer = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('fade-in');
                        // Optional: Add a slight delay for staggered effect for main-cards
                        if (entry.target.classList.contains('main-card')) {
                            const index = Array.from(cards).indexOf(entry.target);
                            entry.target.style.transitionDelay = `${index * 0.1}s`;
                        }
                        observer.unobserve(entry.target); // Stop observing once animated
                    }
                });
            }, {
                threshold: 0.1 // Trigger when 10% of the element is visible
            });

            cards.forEach(card => {
                observer.observe(card);
            });

            // Initialize Chart.js for Budget Chart
            const ctx = document.getElementById('budgetChart').getContext('2d');
            const budgetChart = new Chart(ctx, {
                type: 'doughnut', // Changed to doughnut for a cleaner look
                data: {
                    labels: ['住宿', '交通', '门票', '餐饮', '其他'],
                    datasets: [{
                        label: '预算分配',
                        data: [25, 15, 20, 30, 10], // Example percentages
                        backgroundColor: [
                            'rgba(52, 152, 219, 0.7)', // Blue
                            'rgba(155, 89, 182, 0.7)', // Purple
                            'rgba(46, 204, 113, 0.7)', // Green
                            'rgba(230, 126, 34, 0.7)',  // Orange
                            'rgba(149, 165, 166, 0.7)'  // Gray
                        ],
                        borderColor: [
                            'rgba(52, 152, 219, 1)',
                            'rgba(155, 89, 182, 1)',
                            'rgba(46, 204, 113, 1)',
                            'rgba(230, 126, 34, 1)',
                            'rgba(149, 165, 166, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false, // Allow custom size
                    cutoutPercentage: 60, // Make it a doughnut chart
                    plugins: {
                        legend: {
                            position: 'bottom', // Move legend to bottom for better print layout
                            labels: {
                                font: {
                                    family: 'Open Sans',
                                    size: 12,
                                    weight: 'normal'
                                },
                                color: '#555'
                            }
                        },
                        title: {
                            display: false, // Title handled by h2
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed !== null) {
                                        label += context.parsed + '%'; // Show percentage
                                    }
                                    return label;
                                }
                            }
                        }
                    },
                    layout: {
                        padding: {
                            left: 0,
                            right: 0,
                            top: 0,
                            bottom: 0
                        }
                    }
                }
            });
        });
    </script>
</body>
</html>
